--- libavutil/avassert.h.old	2016-02-16 07:21:39.607914857 +0100
+++ libavutil/avassert.h	2016-02-16 07:52:57.249184323 +0100
@@ -30,14 +30,17 @@
 #include <stdlib.h>
 #include "avutil.h"
 #include "log.h"
+extern void av_fatalHandler(const char *why,const char *file, int lineno);
+typedef void (AV_FATAL_HANDLER)(const char *why);
+
+extern void av_setFatalHandler(AV_FATAL_HANDLER *func);
 
 /**
  * assert() equivalent, that is always enabled.
  */
 #define av_assert0(cond) do {                                           \
     if (!(cond)) {                                                      \
-        av_log(NULL, AV_LOG_PANIC, "Assertion %s failed at %s:%d\n",    \
-               AV_STRINGIFY(cond), __FILE__, __LINE__);                 \
+        av_fatalHandler( AV_STRINGIFY(cond),__FILE__,__LINE__);         \
         abort();                                                        \
     }                                                                   \
 } while (0)
