--- libavformat/mpegtsenc.c
+++ libavformat/mpegtsenc.c
@@ -809,3 +809,8 @@ AVOutputFormat mpegts_muxer = {
     mpegts_write_packet,
     mpegts_write_end,
 };
+int mpegtsenc_init(void)
+{
+    av_register_output_format(&mpegts_muxer);
+    return 0;
+}
\ No newline at end of file
